/*Source: custom-menu-wizard.js
 *Compiled: 2014-10-16, Google Closure Compiler...
 *STATISTICS
 * - originalSize: 75825
 * - originalGzipSize: 19193
 * - compressedSize: 26173
 * - compressedGzipSize: 8395
*/
jQuery(function(g){var w,K=/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*\'([^\']*)\'(?:\s|$)|(\w+)\s*=\s*([^\s\'"]+)(?:\s|$)/g,u=function(b,a){return(a?".":"")+"widget-custom-menu-wizard-"+b},z=function(b){var a=g(this).data().cmwDialogVersion.replace(/\./g,""),a=/^\d+$/.test(a)?"v"+a:a;w[a]?w[a].update(b?b.target:this):w.update(b?b.target:this)},B=function(b,a){var c=!1===b,d=c?{}:b.data(),e={},l=!c&&"2.1.0"===d.cmwDialogVersion,f={items:1,exclude:1},m=g.extend({branch_start:1,exclude_level:1,include_level:1},
f);g.each(c?a:b.find(":input").serializeArray(),function(a,b){var h=b.name.replace(/.*\[([^\]]+)\]$/,"$1"),p=!m[h]&&/^-?\d+$/.test(b.value)?parseInt(b.value,10):b.value;e[h]=p;"hide_empty"===h?e[h]=c||!!d.cmwV36plus||p:f[h]&&(e["_"+h+"_sep"]=!p||/(^\d+\+?$|,)/.test(g.trim(p))?",":" ",p=g.map(p.split(/[,\s]+/),function(a){var b=!l&&/\+$/.test(a);a=a?parseInt(a,10):0;return isNaN(a)||1>a?null:b?a+"+":a}),e["_"+h]=p.join(e["_"+h+"_sep"]))});return e},C=function(b,a,c,d){var e=d.switch_if;return d.switch_at===
b&&("current"===e&&a||"no-current"===e&&!a||"no-output"===e&&!c)},P=function(b,a){b=g.trim(b||"");for(var c={title:"",level:1,branch:0,items:"",depth:0,depth_rel_current:0,start_at:"",start_mode:"",allow_all_root:0,ancestors:0,ancestor_siblings:0,include_root:0,include_level:"",siblings:0,exclude:"",exclude_level:"",contains_current:"",fallback:"",flat_output:0,title_from:"",ol_root:0,ol_sub:0},d=K.exec(b),e={},l=0,f;d;)l++,d[1]?e[d[1]]=d[2]:d[3]?e[d[3]]=d[4]:d[5]?e[d[5]]=d[6]:l--,d=K.exec(b);if(l)for(f in e)c.hasOwnProperty(f)&&
(c[f]=e[f]);f=!!c.items;d=!f&&!!c.branch;e=!f&&!d;f&&(c.filter="items");if(d){c.filter="branch";f=c.start_at.toString();c.branch_start=f;if("0"===f||"branch"===f)c.branch_start="";"root"===f&&(c.branch_start="1");"children"===f&&(c.branch_start="+1");"parent"===f&&(c.branch_start="-1");if("current"===c.branch||"current-item"===c.branch)c.branch=0;else if(!/^[+\-]?\d+$/.test(c.branch.toString()))if(c.branch=c.branch.toLowerCase(),f=a.find("a.cmw-item").filter(function(){return g(this).text().toLowerCase()===
c.branch}),f.length)c.branch=f.parent().data("itemid");else return!1}e&&(c.filter="",c.level=Math.max(1,parseInt(c.level,10)));c.start_at=null;c.include_level||"1"!==c.include_root||(c.include_level="1");c.include_root=null;if(d&&!c.branch&&c.fallback&&(e=c.fallback.toLowerCase().split(/[\s,]+/),f=" "+e.join(" ")+" ",c.fallback="",0<=f.indexOf(" quit ")?c.fallback="quit":0<=f.indexOf(" parent ")?c.fallback="parent":0<=f.indexOf(" current ")&&(c.fallback="current"),""!==c.fallback&&"quit"!==c.fallback))for(0<=
f.indexOf(" +siblings ")&&(c.fallback_siblings=1),l=0;l<e.length;l++)if(/^\d+$/.test(e[l])&&(f=parseInt(e[l],10),0<f)){c.fallback_depth=f;break}if(c.title_from)for(e=c.title_from.toLowerCase().split(/[\s,]+/),l=0;l<e.length;l++)if("branch"===e[l]||"current"===e[l])c["title_from_"+e[l]]=1;else if("branch-root"===e[l]||"current-root"===e[l])c["title_from_"+e[l].replace("-","_")]=1;c.title_from=null;c.hide_empty=1;return B(!1,g.map(c,function(a,b){return null===a?a:{name:b,value:a}}))},L=function(b){var a=
"";b&&(a=b.replace(/[\r\n\t]+/g," ").replace(/^[\[\s]+/,"").replace(/[\s\/\]]+$/,"").split(/[\[\]]/)[0],a=g.trim(a.replace(/\/+$/,""))+" ",a=g.trim((" "+a.replace(/^cmwizard\s/,"")+" ").replace(/\smenu=[^\s]*\s/," ").replace(/\salternative=("[^"]*"|[^\s]*)\s/," ")),a=a.replace(/\s\s+/g," "));return a},D=function(b,a){var c=a.find(".cmw-demo-themenu-ul"),d=c.data(),e=L(b.switch_to),e="cmwizard menu="+b.menu+(""===e?e:" "+e);d.altCode&&d.altCode===e||(d.altCode=e,d.altSettings=P(e,c));a.find(".cmw-demo-alternative").addClass("updated").toggleClass("error",
!1===d.altSettings);return!1===d.altSettings?!1:g.extend({},d.altSettings)},H=function(b,a,c){var d="tick"===c?a._items_sep:a._exclude_sep,e=[],l="tick"===c?"_items":"_exclude",l=a[l]?g.grep(a[l].split(d),function(a){return/\+$/.test(a)?(e.push(parseInt(a,10)),!a):!!a}):[],l=d+l.join(d)+d,e=d+e.join(d)+d;b=b.each(function(){var a=g(this),b=a.data(),q=-1<e.indexOf(d+b.itemid+d),b=q||-1<l.indexOf(d+b.itemid+d);a.toggleClass("cmw-has-"+c,b).toggleClass("cmw-inherit-"+c,q)});return b.filter(".cmw-inherit-"+
c).find("li").removeClass("cmw-has-"+c+" cmw-inherit-"+c).add(b.filter(".cmw-has-"+c))},x=function(b,a){return(b?b:a)[b?"find":"closest"](u("onchange",1))},M=function(b,a){var c=[],d=b.match(/^(\d+)(\+|-)?$/),e,d=d?[parseInt(d[1],10),d[2]||""]:[];if(0<d[0])for(e=1;e<=a;e++)(e===d[0]||"-"===d[1]&&e<d[0]||"+"===d[1]&&e>d[0])&&c.push(".level-"+e);return c.join(",")},N=function(b,a){var c=b.find(".cmw-demo-themenu-ul"),d=c.find(".picked"),e="",l=a.hide_title?"":a.title,f=0,m=b.find(".cmw-demo-theoutput-wrap").empty(),
q=["menu-widget"],s={};if(d.length&&m.length){(l=c.find(".title-from-item").children(".cmw-item").text()||"")||a.hide_title||(l=a.title||"");for(d.each(function(b){var c=g(this),d=c.data(),l=d.trace?d.trace.toString().split(","):[];b=d.itemid.toString();var m=1,c=c.children(".cmw-item");if(!a.flat_output)for(s[b]=1,b=0;b<l.length;b++)s[l[b]]&&m++;if(f)if(m>f)e+=a.ol_sub?"<ol>":"<ul>";else{for(;f>m;)--f,e+="</li>"+(a.ol_sub?"</ol>":"</ul>");e+="</li>"}e+='<li class="cmw-level-'+m+(d.included||"")+
'"><a href="#'+c.data("indx")+'">'+c.text()+"</a>";f=m});1<f;)--f,e+="</li>"+(a.ol_sub?"</ol>":"</ul>");e+="</li>";q.push(b.find(".cmw-demo-fallback").data("fellback"));e=(a.ol_root?"<ol":"<ul")+' class="'+g.trim(q.join(" "))+'">'+e+(a.ol_root?"</ol>":"</ul>");m.html(e);m.find("li").filter(function(){return!!g(this).children("ul, ol").length}).addClass("cmw-has-submenu")}m.length&&l&&(d.length||!a.hide_empty)&&m.prepend("<h3>"+l+"</h3>")},O=function(b,a,c){var d;b.find("optgroup").filter(function(){var a=
g(this).data().cmwOptgroupIndex===c;a||g(this).remove();return a}).length||(d=g("#"+b.attr("id")+"_ignore").find("optgroup").eq(c).clone(),d.length&&(0<a&&(a=0),b.append(d).val(a)));return a},Q=function(b){b=g(this);var a=b.data(),c=!a.cmwAbsolute,d=b.closest(".ui-dialog"),e=d.find(".ui-dialog-content"),l=parseInt(d.css("top"),10)+(c?1:-1)*g(document).scrollTop();a.cmwAbsolute=c;a.cmwMaxHeight||(a.cmwMaxHeight=e.dialog("option","maxHeight"));b.button("option","icons",{primary:c?"ui-icon-circle-close":
"ui-icon-circle-check"});d.toggleClass("cmw-assistance-dialog-fixed",!c);e.dialog("option",{maxHeight:c?!c:a.cmwMaxHeight});d.css("top",l);return!1},R=function(b){var a=g(this);b=["current-menu-item","current-menu-parent","current-menu-ancestor"];var c=a.closest(".ui-dialog-content"),d=c.find(".cmw-demo-themenu-ul"),a=a.find("span").not("."+b[0]).parentsUntil(d,"li"),e,l=function(){this.title=this.title+" "+e.replace(" "," & ").replace(/-/g," ")};d.find("."+b.join(",.")).removeClass(b.join(" ")).each(function(){this.title=
this.title.replace(/\s.*$/,"")});for(d=0;d<a.length;d++)e=1===d?b.join(" "):b[0],a.eq(d).children(".cmw-item").find("span").addClass(e).each(l),1<b.length&&b.shift();z.call(g(c.data().cmwOnchange).get(0));return!1},S=function(b){g(this).closest(".ui-dialog-content").find(".cmw-item").eq(this.href.split("#")[1]).not(":has(.current-menu-item)").trigger("click");this.blur();return!1},T=function(b){b=g(this);var a=b.hasClass("cmw-tick")?"tick":"cross",c=b.parent();b=c.closest(".cmw-demo-themenu-ul");
var d=c.hasClass("cmw-inherit-"+a),e=d||c.hasClass("cmw-has-"+a),l=e?g([]):c.parentsUntil(b,".cmw-inherit-"+a),f=g(c.closest(".ui-dialog-content").data().cmwOnchange).find("tick"===a?".cmw-setitems":".cmw-exclusions"),m;!b.hasClass("cmw-using-alternative")&&f.length&&(m=b.find(".cmw-has-"+a)[d||l.length?"not":"add"](c),!e||c.children("ul").length&&!b.parent().hasClass("cmw-version-210")?e&&!d&&(m=m.not(c.find(".cmw-has-"+a))):m=m.not(c),m=m.add(l.find("li").not(c)),m=m.map(function(){var b=this===
c[0]||this===l.get(0)?e:g(this).hasClass("cmw-inherit-"+a);return g(this).data().itemid+(b?"+":"")}).get().join(/(,|^\d+\+?$)/.test(g.trim(f.val())||",")?",":" "),f.val(m).trigger("change"));this.blur();return!1},U=function(b){var a={autoOpen:!1,width:Math.min(.9*g(window).width(),600),maxHeight:g(window).height()-40,modal:!1,containment:"window",create:function(){var a=g(this).closest(".ui-dialog");if(a.hasClass("cmw-assistance-dialog-fixed"))g("<button/>").addClass("cmw-dialog-fixed-absolute").button({label:b.cmwDialogFixed,
icons:{primary:"ui-icon-circle-check"}}).appendTo(a.find(".ui-dialog-titlebar")).on("click",Q)},dialogClass:"cmw-assistance-dialog cmw-assistance-dialog-fixed"},c=g.map(["SetCurrent","Inclusions","Exclusions","Fallback","Alternative"],function(a){return'<div class="cmw-demo-'+a.toLowerCase()+' cmw-demo-small">'+(b["cmwDialog"+a]||"")+"</div>"}),c=g("<div/>",{id:b.cmwDialogId}).addClass(u("dialog")).append(g("<div/>").addClass("cmw-demo-themenu cmw-version-"+b.cmwDialogVersion.replace(/\./g,"")).html('<em class="cmw-demo-small">'+
b.cmwDialogPrompt+"</em>")).append(g("<div/>").addClass("cmw-demo-theoutput").html('<em class="cmw-demo-small">'+b.cmwDialogOutput+'</em><em class="cmw-demo-plugin-version cmw-demo-small">v'+b.cmwDialogVersion+"</em>"+c.shift()+'<div class="cmw-demo-theoutput-wrap ui-corner-all"></div>'+c.join(""))).append(g("<div/>").addClass("cmw-demo-theshortcode").html('<code class="ui-corner-all"></code><div class="cmw-find-shortcodes"><a href="#" class="button-secondary '+u("find-shortcodes")+'" data-nonce="'+
(b.cmwDialogNonce||"")+'" title="'+b.cmwDialogShortcodes+'"><span class="spinner"></span><span>[&hellip;]</span></a></div><div class="cmw-demo-found-shortcodes cmw-demo-small ui-corner-all"></div>'));c.dialog(a);c.find(".cmw-demo-themenu").on("click",".cmw-tick,.cmw-cross",T).on("click",".cmw-item",R);c.find(".cmw-demo-theoutput").on("click","a",S);return c},I=function(b,a){b.dialog("option","title","CMW : "+(a.find(".cmw-widget-title").val()||b.data().cmwUntitled)+" ["+a.find(".cmw-select-menu").find("option:selected").text()+
"]")},J=function(b){var a=g(b.data().cmwOnchange),c=parseInt(a.find(".cmw-select-menu").val(),10),d=b.find(".cmw-demo-themenu-ul"),e=[],l=0,f="",m=function(a){return 1<a?'<a href="#" class="'+u("colexp")+' ui-icon ui-icon-triangle-1-e" style="left:-'+(2.4*(a-2)+2)+'em;">&nbsp;</a>':""};if(!d.length||d.data("menuid")!==c){for(a.find(".cmw-assist-items optgroup").find("option").each(function(a){for(var b=g(this),c=b.data().cmwLevel;c<e.length;)f+="</li></ul>"+m(e.length),e.pop();c>e.length?f+="<ul>":
(f+="</li>",e.pop());f+='<li class="level-'+c+'" data-itemid="'+this.value+'" data-level="'+c+'" data-trace="'+e.join(",")+'">';f+='<a href="#" class="cmw-cross ui-corner-all"></a>';f+='<a class="cmw-item ui-corner-all" href="#" data-indx="'+a+'"><span class="ui-corner-all" title="#'+this.value+'">'+g.trim(b.text());f+='</span></a><a href="#" class="cmw-tick ui-corner-all"></a>';e.push(this.value);c>l&&(l=c)});e.length;)f+="</li></ul>"+m(e.length),e.pop();d.remove();b.find(".cmw-demo-themenu").append(g(f).addClass("cmw-demo-themenu-ul").data({maxLevel:l,
menuid:c}))}};w={setLevels:function(b,a){if(a){var c=b.find(".cmw-branch-start"),d=c.val();c.find("optgroup").each(function(b){var c=g(this),d=c.find("option"),m=d.length,q=c.data();if(b)for(d.slice(a).remove();m<a;)++m,c.append(g("<option/>",{value:m}).text(m));else for(m=(m+1)/2,m>a&&d.each(function(b,c){Math.abs(c.value)>=a&&g(c).remove()});m<a;)c.prepend(g("<option/>",{value:-m}).text(-m+(1<m?"":" ("+q.cmwTextParent+")"))).append(g("<option/>",{value:"+"+m}).text("+"+m+(1<m?"":" ("+q.cmwTextChildren+
")"))),++m});/^\d+$/.test(d)?d>a&&c.val("1"):""!==d&&Math.abs(d)>=a&&c.val("");b.find(".cmw-ancestors,.cmw-ancestor-siblings").each(function(){var b=g(this),c=(b.find("option").length+1)/2,d=b.val(),m=Math.max(2,a);Math.abs(d)>=a&&b.val(0>d?1-a:a-1);c!==m&&b.find("optgroup").each(function(a,b){var d=g(b),e=d.data().cmwTextForOption,f;c>m&&d.find("option").slice(m-c).remove();for(f=c;f<m;f++)d.append(g("<option/>",{value:a?f:-f}).text(e.replace("%d",a?f:-f)))})});b.find(".cmw-include-level,.cmw-exclude-level").each(function(){var b=
g(this),c=b.find("option"),d=(c.length-1)/3,m=b.val(),q=c.eq(2).text(),s=c.eq(3).text();for(c.slice(3*a+1).remove();d<a;)++d,b.append(g("<option/>",{value:d}).text(d)).append(g("<option/>",{value:d+"-"}).text(q.replace(/\d+/,d))).append(g("<option/>",{value:d+"+"}).text(s.replace(/\d+/,d)));parseInt(m,10)>a&&b.val("")});b.find(".cmw-set-levels").each(function(){var b=g(this),c=b.data(),d=c.cmwTextLevels||"",c=c.cmwSetLevels||0,m=b.find("option"),q=m.length-c;b.val()>a&&b.val(m.eq(0).val());for(b.find("option").slice(c+
a).remove();q<a;)++q,b.append(g("<option/>",{value:q}).text(q+d))})}},setFields:function(b,a){var c=a.find(".cmw-bybranch"),d=a.find(".cmw-byitems").prop("checked"),e=d||!c.prop("checked"),l=a.find(".cmw-assist-items"),f=parseInt(l.val(),10);b.hasClass("cmw-select-menu")?(f=O(l,f,b[0].selectedIndex),this.setLevels(a,(l.find("optgroup").data()||{}).cmwMaxLevel)):b.hasClass("cmw-level")?(e=!0,d=!e,a.find(".cmw-bylevel").prop("checked",e)):b.is(l)?(e=d=!1,c.prop("checked",!e)):b.hasClass("cmw-setitems")?
(e=d=!0,a.find(".cmw-byitems").prop("checked",d)):b.hasClass("cmw-ancestors")&&"0"===b.val()?a.find(".cmw-ancestor-siblings").val("0"):b.hasClass("cmw-ancestor-siblings")&&"0"!==b.val()&&"0"===a.find(".cmw-ancestors").val()&&a.find(".cmw-ancestors").val(b.val());c=a.find(".cmw-fallback").val();g.each({"-ss":d,"-ud":d||1>a.find(".cmw-depth").val(),"not-br":e,"not-br-ci":e||!!f,"not-fb-pc":e||!!f||"parent"!==c&&"current"!==c,"not-sw":!!a.find(".cmw-switchable").filter(function(){return!g(this).val()}).length},
function(b,c){a.find(".cmw-disableif"+b).toggleClass("cmw-colour-grey",c)})},shortcode:function(b){var a={menu:b.menu},c="branch"===b.filter,d="items"===b.filter,e,l;b.title&&!b.hide_title&&(a.title=[b.title]);!c&&!d&&1<b.level&&(a.level=b.level);c&&(a.branch=b.branch||"current",b.branch_start&&(a.start_at=[b.branch_start]),"level"===b.start_mode&&(a.start_mode="level"),b.allow_all_root&&(a.allow_all_root=1));d&&(a.items=[b._items]);0<b.depth&&(a.depth=b.depth);b.depth_rel_current&&0<b.depth&&(a.depth_rel_current=
1);c&&!b.branch&&b.fallback&&(a.fallback=[b.fallback],"quit"!==b.fallback&&(b.fallback_siblings&&a.fallback.push("+siblings"),b.fallback_depth&&a.fallback.push(b.fallback_depth)));c&&b.ancestors&&(a.ancestors=b.ancestors,b.ancestor_siblings&&(a.ancestor_siblings=b.ancestor_siblings));b.include_level&&(a.include_level=[b.include_level]);b._exclude&&(a.exclude=[b._exclude]);b.exclude_level&&(a.exclude_level=[b.exclude_level]);d=[];b.title_from_current?d.push("current"):b.title_from_current_root&&d.push("current-root");
c&&b.title_from_branch?d.push("branch"):c&&b.title_from_branch_root&&d.push("branch-root");d.length&&(a.title_from=d);for(d in{siblings:1,flat_output:1,ol_root:1,ol_sub:1,fallback_ci_parent:1})b[d]&&(a[d]=1);c={contains_current:"",container:"div",container_id:"",container_class:"",menu_class:"menu-widget",widget_class:""};for(d in c)b[d]!==c[d]&&(a[d]=[b[d]]);c={wrap_link:"before",wrap_link_text:"link_before"};for(d in c)(e=b[c[d]].toString().match(/^<(\w+)/))&&e[1]&&(a[d]=[e[1]]);b.switch_if&&b.switch_at&&
(a.alternative=[b.switch_if,b.switch_at],l=L(b.switch_to));c=[];for(d in a)c.push(g.isArray(a[d])?d+'="'+a[d].join(",")+'"':d+"="+a[d]);return"[cmwizard "+c.join(" ")+(l?"]"+l+"[/cmwizard]":"/]")},structureUpdate:function(b,a,c){var d=-1,e=9999,l=0,f=0,m="",q=null,s,h,p,n,t="menu",r="branch"===a.filter,u="items"===a.filter,x=!r&&!u,w=r&&!a.branch,E=!c&&!!a.switch_if&&!!a.switch_at,A=b.find(".cmw-demo-themenu-ul"),y=A.data().maxLevel,v=A.find(".current-menu-item").closest("li"),G=v.length?v.data().level:
-1,k=A.find("li").removeData("included").removeClass("title-from-item"),F=a.depth,z=a.depth_rel_current,B=H(k,a,"cross");h=k.length&&v.is(k);a.contains_current!==t||h||(k=g([]));if(E&&C(t,h,k.length,a)&&(q=D(a,b),!1!==q))return q;t="primary";u&&k.length&&(k=H(k,a,"tick"));r&&k.length&&(p=w?v:k.filter("[data-itemid="+a.branch+"]"),p.length?(d=p.data().level||0,k=p.add(p.find("li")),s=p):k=g([]));if(x&&k.length&&1<a.level){h=1;for(n=[];h<a.level;h++)n.push(".level-"+h);k=k.not(n.join(","))}h=k.length&&
v.is(k);a.contains_current!==t||h||(k=g([]));if(E&&C(t,h,k.length,a)&&(q=D(a,b),!1!==q))return q;t="secondary";if(x&&k.length&&F&&(h=z&&G>=a.level?G:a.level,h+=F,h<=y)){for(n=[];h<=y;h++)n.push(".level-"+h);k=k.not(n.join(","))}if(r&&k.length&&(n=parseInt(a.branch_start,10),n=isNaN(n)||!n?d:a.branch_start.match(/^(\+|-)/)?Math.max(1,d+n):n,w&&a.fallback&&!v.find("li").length&&(m="cmw-fellback-to-"+a.fallback,"quit"===a.fallback?n=y+1:(n="current"===a.fallback||2>d?d:d-1,a.fallback_depth&&(F=a.fallback_depth,
z=1))),n>y?k=g([]):(n<d&&(p=p.parentsUntil(A,"li.level-"+n)),"level"===a.start_mode&&n<=d&&(1<n||a.allow_all_root)?k=p.parent().find("li"):n<d&&(k=p.add(p.find("li"))),m&&a.fallback_siblings&&k.length&&(1<n||a.allow_all_root)&&(k=k.add(p.siblings("li.level-"+n)))),k.length)){d=n;p=9999;F&&(p=z&&G>=d&&k.filter(v).length?G:d,p+=F,e=p-1);h=1;for(n=[];h<=y;h++)h>=d&&h<p&&n.push(".level-"+h);k=k.filter(n.join(","))}h=k.length&&v.is(k);a.contains_current!==t||h||(k=g([]));if(E&&C(t,h,k.length,a)&&(q=D(a,
b),!1!==q))return q;t="inclusions";if(r&&k.length){n=s.data().level;if(a.ancestors&&(s.is(k)||n>e)){h=a.ancestors;0>h&&(h=Math.max(1,n+h));d=a.ancestor_siblings;0>d&&(d=Math.max(1,n+d));n=[];for(p=[];h<=y;h++)h<=e&&(n.push(".level-"+h),0<d&&h>=d&&p.push(".level-"+h));h=k.length;n=s.parentsUntil(A,n.join(","));k=k.add(n.not(k).data("included"," cmw-an-included-ancestor"));p.length&&(k=k.add(n.filter(p.join(",")).siblings("li").not(k).data("included"," cmw-an-included-ancestor-sibling")));l+=k.length-
h}a.siblings&&s.is(k)&&(n=k.length,k=k.add(s.siblings("li").data("included"," cmw-an-included-sibling")),l+=k.length-n)}k.length&&a.include_level&&(p=M(a.include_level,y))&&(n=k.length,k=k.add(A.find(p)),l+=k.length-n);h=k.length&&v.is(k);a.contains_current!==t||h||(k=g([]));if(E&&C(t,h,k.length,a)&&(q=D(a,b),!1!==q))return q;t="output";k.length&&B.length&&(n=k.length,k=k.not(B),f+=n-k.length);k.length&&a.exclude_level&&(p=M(a.exclude_level,y))&&(n=k.length,k=k.not(p),f+=n-k.length);h=k.length&&v.is(k);
a.contains_current!==t||h||(k=g([]));if(E&&C(t,h,k.length,a)&&(q=D(a,b),!1!==q))return q;a.title_from_current&&v.length?v.addClass("title-from-item"):a.title_from_current_root&&v.length?v.closest(".level-1").addClass("title-from-item"):r&&s&&(a.title_from_branch?s.addClass("title-from-item"):a.title_from_branch_root&&s.closest(".level-1").addClass("title-from-item"));b.find(".cmw-demo-fallback").data("fellback",m).toggleClass("updated",!!m);b.find(".cmw-demo-setcurrent").toggleClass("error",!v.length&&
(!!a.contains_current||w));c||null!==q||b.find(".cmw-demo-alternative").removeClass("error updated");b.find(".cmw-demo-themenu-ul").toggleClass("cmw-using-alternative",!!c);h={inclusions:l,exclusions:f};for(n in h)p=b.find(".cmw-demo-"+n),p.text(p.text().replace(/\d+$/,h[n])).toggleClass("updated",0<h[n]);A.toggleClass("cmw-demo-filteritems",u).find(".picked").not(k.addClass("picked")).removeClass("picked");return!1},update:function(b){var a=g(b);b=x(0,a);var c=g("#"+b.data().cmwDialogId),d;a.hasClass("cmw-listen")&&
this.setFields(a,b);d=B(b);c.length&&c.dialog("isOpen")&&(c.dialog("moveToTop"),a.hasClass("cmw-select-menu")&&J(c),a=this.structureUpdate(c,d),!1!==a&&this.structureUpdate(c,a,!0),I(c,b),N(c,a||d));b.add(c).find("code").text(this.shortcode(d))},v210:{setLevels:function(b,a){var c=b.find(".cmw-start-level"),d=c.val(),e=c.find("option").length,l;d>a&&c.val(1);for(c.find("option").slice(a).remove();e<a;)++e,c.append(g("<option/>",{value:e}).text(e));c=b.find(".cmw-depth");d=c.val();e=c.find("option").length;
l=c.data().cmwTextLevels;d>a&&c.val(0);for(c.find("option").slice(a+1).remove();e<=a;)c.append(g("<option/>",{value:e}).text(e+l)),++e},setFields:function(b,a){var c=a.find(".cmw-showall").prop("checked"),d=a.find(".cmw-showspecific").prop("checked"),e=a.find(".cmw-assist-items"),l=parseInt(e.val(),10);b.hasClass("cmw-select-menu")&&(l=O(e,l,b[0].selectedIndex),this.setLevels(a,(e.find("optgroup").data()||{}).cmwMaxLevel));g.each({"":c||d,"-ss":d,"not-rp":c||d||0<=l,"not-ci":c||d||!!l},function(b,
c){a.find(".cmw-disableif"+b).toggleClass("cmw-colour-grey",c).find("input,select").prop("disabled",c)})},shortcode:function(b){var a={menu:b.menu},c=0<b.filter,d=!!b.filter&&!c,e;b.title&&(a.title=[b.title]);if(c)switch(b.filter_item){case 0:a.children_of=["current"];break;case -1:a.children_of=["parent"];break;case -2:a.children_of=["root"];break;default:a.children_of=b.filter_item}d&&(a.items=[b._items]);c&&0>b.filter_item&&b.fallback_no_ancestor&&(a.fallback_parent=b.fallback_include_parent_siblings?
["siblings"]:b.fallback_include_parent?["parent"]:1);c&&!b.filter_item&&b.fallback_no_children&&(a.fallback_current=b.fallback_nc_include_parent_siblings?["siblings"]:b.fallback_nc_include_parent?["parent"]:1);1<b.start_level&&(a.start_level=b.start_level);0<b.depth&&(a.depth=b.depth);b.depth_rel_current&&0<b.depth&&(a.depth_rel_current=1);d=[];c&&(b.include_parent_siblings?d.push("siblings"):b.include_parent&&d.push("parent"),b.include_ancestors&&d.push("ancestors"),d.length&&(a.include=d));d=[];
c&&b.title_from_parent&&d.push("parent");b.title_from_current&&d.push("current");d.length&&(a.title_from=d);for(d in{flat_output:1,contains_current:1,ol_root:1,ol_sub:1})b[d]&&(a[d]=1);c={container:"div",container_id:"",container_class:"",menu_class:"menu-widget",widget_class:""};for(d in c)b[d]!==c[d]&&(a[d]=[b[d]]);c={wrap_link:"before",wrap_link_text:"link_before"};for(d in c)(e=b[c[d]].toString().match(/^<(\w+)/))&&e[1]&&(a[d]=[e[1]]);c=[];for(d in a)c.push(g.isArray(a[d])?d+'="'+a[d].join(" ")+
'"':d+"="+a[d]);return"[custom_menu_wizard "+c.join(" ")+"]"},update:function(b){var a=g(b);b=x(0,a);var c=g("#"+b.data().cmwDialogId),d,e,l,f,m,q,s,h,p,n,t,r,u;a.hasClass("cmw-listen")&&this.setFields(a,b);if(c.length&&c.dialog("isOpen")){c.dialog("moveToTop");a.hasClass("cmw-select-menu")&&J(c);f=B(b);d=!f.filter;a=0<f.filter;e=!d&&!a;m=f.include_parent;q=f.include_parent_siblings;s=c.find(".cmw-demo-themenu-ul");l=s.data().maxLevel;p=s.find(".current-menu-item").closest("li");n=p.length?p.data().level:
-1;h=s.find("li").removeData("included").removeClass("title-from-item");e&&(h=H(h,f,"tick"));h.length&&!p.length&&(f.contains_current||a&&1>f.filter_item)&&(h=g([]));h.length&&a&&(0<f.filter_item?r=h.filter("[data-itemid="+f.filter_item+"]"):f.filter_item?1===n&&f.fallback_no_ancestor?(r=p,m=m||f.fallback_include_parent,q=q||f.fallback_include_parent_siblings,t="cmw-fellback-to-current"):r=1===n?s:-1>f.filter_item?s.find(".current-menu-ancestor").eq(0).closest("li"):s.find(".current-menu-parent").closest("li"):
p.find("li").length?r=p:f.fallback_no_children&&(r=s.find(".current-menu-parent").closest("li"),r.length||(r=s),m=m||f.fallback_nc_include_parent,q=q||f.fallback_nc_include_parent_siblings,t="cmw-fellback-to-parent"));if(h.length)if(d)for(u=f.depth_rel_current&&f.depth&&p.length&&n>=f.start_level?n+f.depth-1:f.depth?f.start_level+f.depth-1:9999,d=1;d<=l;d++){if(d<f.start_level||d>u)h=h.not(".level-"+d)}else r&&r.length?(u=f.depth_rel_current&&f.depth&&p.length&&r.has(p[0]).length?n-1+f.depth:f.depth?
Math.max((r.data().level||0)+f.depth,f.start_level+f.depth-1):9999,h=r.find("li").filter(function(){var a=g(this).data().level;return a>=f.start_level&&a<=u})):a&&(h=g([]));h.length&&a&&r&&r.is("li")&&(q&&(h=h.add(r.siblings("li").data("included"," cmw-an-included-parent-sibling")),m=!0),f.include_ancestors&&(h=h.add(r.parentsUntil(s,"li").data("included"," cmw-an-included-ancestor")),m=!0),m&&(h=h.add(r.data("included"," cmw-the-included-parent"))));!h.length||!f.contains_current||p.length&&h.filter(p).length||
(h=g([]));f.title_from_parent&&h.length&&r&&r.is("li")?r.addClass("title-from-item"):f.title_from_current&&h.length&&p.addClass("title-from-item");t=h.length?t:"";c.find(".cmw-demo-fallback").data("fellback",t).toggleClass("updated",!!t);c.find(".cmw-demo-setcurrent").toggleClass("error",!p.length&&(f.contains_current||a&&1>f.filter_item));s.toggleClass("cmw-demo-filteritems",e).find(".picked").not(h.addClass("picked")).removeClass("picked");I(c,b);N(c,f);c.find("code").text(this.shortcode(f))}}}};
g(document).on("change",u("onchange",1),z).on("click",u("assist",1),function(b){b=g(this);b=x(0,b);var a=b.data(),c=g("#"+a.cmwDialogId);c.length||(c=U(a).data({cmwOnchange:"#"+b.attr("id"),cmwUntitled:"["+a.cmwDialogUntitled+"]"}));c.dialog("isOpen")?c.dialog("close"):(J(c),I(c,b),c.dialog("open"),z.call(b[0]));this.blur();return!1}).on("click",u("fieldset",1),function(b){b=g(this);var a=b.next(".cmw-fieldset-state"),c=!a.prop("checked");a.length&&(a.prop("checked",c),b.toggleClass("cmw-collapsed-fieldset",
c),a.next("div")[c?"slideUp":"slideDown"]());this.blur();return!1}).on("click",".widget-action,.widget-control-close",function(b){b=g(this).closest("div.widget");var a=b.parent();a.hasClass("customize-control-widget_form")&&!a.hasClass("expanded")||x(b).each(function(){var a=g("#"+g(this).data().cmwDialogId);a.length&&a.dialog("isOpen")&&a.dialog("close")})}).on("click",".widget-control-remove",function(b){x(g(this).closest("div.widget")).each(function(){var a=g("#"+g(this).data().cmwDialogId);a.length&&
(a.dialog("destroy"),a.remove())})}).on("click",u("colexp",1),function(b){b=/1-e/.test(this.className)?"slideUp":"slideDown";g(this).toggleClass("ui-icon-triangle-1-s ui-icon-triangle-1-e").prev("ul")[b]();return!1}).on("click",u("find-shortcodes",1),function(b){b=g(this);var a=b.parent().parent();ajaxurl&&!a.hasClass("cmw-ajax-fetching")&&(a.hasClass("cmw-ajax-showing")?a.removeClass("cmw-ajax-showing"):(a.addClass("cmw-ajax-fetching"),g.get(ajaxurl,{action:"cmw-find-shortcodes",_wpnonce:b.data().nonce}).done(function(b){b&&
"0"!==b&&(a.find(".cmw-demo-found-shortcodes").html(g(b).find("response_data").text()),a.addClass("cmw-ajax-showing"))}).always(function(b){a.removeClass("cmw-ajax-fetching")})));this.blur();return!1}).on("click",u("legacy-close",1),function(){g(this).parent().remove();return!1});window.Custom_Menu_Wizard_Widget&&g(window.Custom_Menu_Wizard_Widget.trigger||[]).trigger("change")});